generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model classes {
  name      String      @id
  students  students[]
  teachings teachings[]
}

model grades {
  value       Int
  timestamp   DateTime
  description String
  student     String
  students    students @relation(fields: [student], references: [email])

  @@id([value, timestamp, description])
}

model students {
  firstname String
  lastname  String
  email     String   @id
  password  String
  class     String
  classes   classes  @relation(fields: [class], references: [name])
  grades    grades[]
}

model subjects {
  name        String      @id
  description String
  teachings   teachings[]
}

model teachers {
  firstname String
  lastname  String
  email     String      @id
  password  String
  teachings teachings[]
}

model teachings {
  teacher  String
  class    String
  subject  String
  classes  classes  @relation(fields: [class], references: [name])
  subjects subjects @relation(fields: [subject], references: [name])
  teachers teachers @relation(fields: [teacher], references: [email])

  @@id([class, teacher, subject])
}
